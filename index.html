<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ahorcado para Alma</title>
  <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/almayfacu/imagenes-flipbook/refs/heads/main/alma.png">
  <!-- FUENTE: Poppins (modificación de tipografía) -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #ffdce0, #e0f7ff);
      /* CAMBIO: fuente moderna, legible en desktop y móvil, sin cursivas ni rústica */
      font-family: 'Poppins', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      overflow-x: hidden;
      text-align: center;
      padding: 20px;
    }

    h1 {
      color: #b983ff;
      text-shadow: 2px 2px #fff;
      font-size: 2.2rem;
      font-weight: 600;
    }

    #hangman {
      width: 100%;
      max-width: 250px;
      height: auto;
      margin-top: 10px;
    }

    .part {
      stroke: #a2d2ff;
      stroke-width: 4px;
      fill: none;
      visibility: hidden;
      transition: visibility 0.3s ease-in;
    }

    #wordDisplay {
      font-size: 2rem;
      letter-spacing: 10px;
      margin: 20px auto;
      color: #7a9cc6;
      word-break: break-word;
    }

    #letters {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      max-width: 100%;
      gap: 8px;
    }

    .letter {
      background-color: #ffcad4;
      border: none;
      border-radius: 10px;
      padding: 10px 15px;
      font-size: 1.2rem;
      cursor: pointer;
      transition: transform 0.3s;
    }

    .letter:hover {
      background-color: #ffc8dd;
      transform: scale(1.1);
    }

    .letter:disabled {
      background-color: #d3d3d3;
      color: white;
      cursor: not-allowed;
    }

    #finalContainer {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin-top: 30px;
      animation: slideToCenter 1s ease-out forwards;
    }

    #finalContainer img {
      max-width: 90%;
      max-height: 1000px;
      border-radius: 20px;
      box-shadow: 0 0 30px rgba(0,0,0,0.3);
      animation: glow 2s ease-in-out infinite alternate;
    }

    @keyframes slideToCenter {
      from {
        opacity: 0;
        transform: translateY(100px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes glow {
      from {
        filter: drop-shadow(0 0 5px #ffb3c1);
      }
      to {
        filter: drop-shadow(0 0 25px #ffb3c1);
      }
    }

    #message {
      font-size: 2rem;
      color: #ff6b6b;
      font-weight: bold;
      animation: shake 0.5s infinite alternate;
      margin-bottom: 20px;
    }

    @keyframes shake {
      from { transform: translateX(-5px); }
      to { transform: translateX(5px); }
    }

    #replayButton {
      margin-top: 20px;
      background-color: #cdb4db;
      border: none;
      padding: 12px 25px;
      border-radius: 15px;
      font-size: 1.2rem;
      color: white;
      cursor: pointer;
      box-shadow: 2px 2px 10px rgba(0,0,0,0.2);
      transition: background 0.3s, transform 0.3s;
    }

    #replayButton:hover {
      background-color: #a3c4f3;
      transform: scale(1.05);
    }

    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      background-color: #f4a261;
      animation: fall 3s linear infinite;
      top: -10px;
      z-index: 999;
    }

    @keyframes fall {
      to {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }

    @media screen and (max-width: 500px) {
      #wordDisplay {
        font-size: 1.6rem;
        letter-spacing: 5px;
      }

      .letter {
        font-size: 1rem;
        padding: 8px 12px;
      }

      h1 {
        font-size: 1.8rem;
      }
    }
  </style>
</head>
<body>

  <h1>Descubri la palabra, para desbloquear otra razón</h1>

  <svg id="hangman">
    <line x1="10" y1="240" x2="150" y2="240" class="part" style="visibility: visible;" />
    <line x1="40" y1="240" x2="40" y2="20" class="part" style="visibility: visible;" />
    <line x1="40" y1="20" x2="120" y2="20" class="part" style="visibility: visible;" />
    <line x1="120" y1="20" x2="120" y2="50" class="part" style="visibility: visible;" />
    <circle cx="120" cy="70" r="20" class="part" />
    <line x1="120" y1="90" x2="120" y2="150" class="part" />
    <line x1="120" y1="100" x2="100" y2="130" class="part" />
    <line x1="120" y1="100" x2="140" y2="130" class="part" />
    <line x1="120" y1="150" x2="100" y2="190" class="part" />
    <line x1="120" y1="150" x2="140" y2="190" class="part" />
  </svg>

  <div id="wordDisplay">_ _ _ _ _ _ _ _ _ _</div>
  <div id="letters"></div>

  <div id="finalContainer">
    <div id="message"></div>
    <img id="winImage" src="resiliencia.png" alt="Imagen sorpresa" style="display: none;" />
    <button id="replayButton" onclick="window.location.reload()">Volver a jugar</button>
  </div>

  <!-- Sonidos -->
  <audio id="correctSound" src="bien.mp3"></audio>
  <audio id="wrongSound" src="mal.mp3"></audio>
  <audio id="winSound" src="bien2.mp3"></audio>

  <script>
    const word = "RESILIENCIA";
    let guessed = Array(word.length).fill("_");
    let mistakes = 0;
    const maxMistakes = 6;

    const wordDisplay = document.getElementById("wordDisplay");
    const lettersContainer = document.getElementById("letters");
    const parts = document.querySelectorAll(".part");
    const finalContainer = document.getElementById("finalContainer");
    const message = document.getElementById("message");
    const replayButton = document.getElementById("replayButton");
    const winImage = document.getElementById("winImage");

    const correctSound = document.getElementById("correctSound");
    const wrongSound = document.getElementById("wrongSound");
    const winSound = document.getElementById("winSound");

    function updateDisplay() {
      wordDisplay.textContent = guessed.join(" ");
    }

    function createLetters() {
      const alphabet = "ABCDEFGHIJKLMNÑOPQRSTUVWXYZ";
      alphabet.split('').forEach(letter => {
        const btn = document.createElement("button");
        btn.textContent = letter;
        btn.classList.add("letter");
        btn.addEventListener("click", () => handleGuess(letter, btn));
        lettersContainer.appendChild(btn);
      });
    }

    // *** MODIFICACIÓN: reproducción exclusiva por letra ***
    function playLetterSound(isCorrect) {
      // Cortar cualquier sonido previo de letras (correcto/incorrecto)
      [correctSound, wrongSound].forEach(s => {
        try { s.pause(); s.currentTime = 0; } catch(e) {}
      });
      // Elegir y reproducir el sonido de esta letra
      const s = isCorrect ? correctSound : wrongSound;
      s.currentTime = 0; // garantiza que suene aunque se repita rápido
      const p = s.play();
      if (p && p.catch) p.catch(() => {}); // por si el navegador bloquea algo
    }

    function handleGuess(letter, button) {
      button.disabled = true;
      let found = false;

      for (let i = 0; i < word.length; i++) {
        if (word[i] === letter) {
          guessed[i] = letter;
          found = true;
        }
      }

      // usar reproducción exclusiva
      playLetterSound(found);

      if (!found) {
        revealPart(mistakes);
        mistakes++;
      }

      updateDisplay();
      checkGameState();
    }

    function revealPart(index) {
      if (parts[4 + index]) {
        parts[4 + index].style.visibility = 'visible';
      }
    }

    function checkGameState() {
      if (!guessed.includes("_")) {
        showWin();
      } else if (mistakes >= maxMistakes) {
        showLoss();
      }
    }

    function disableAllButtons() {
      document.querySelectorAll(".letter").forEach(btn => btn.disabled = true);
    }

    function showWin() {
      winSound.play();
      disableAllButtons();
      triggerConfetti();
      message.style.display = "none";
      winImage.style.display = "block";
      finalContainer.style.display = "flex";
    }

    function showLoss() {
      disableAllButtons();
      message.textContent = "NOO PERDISTE 😢";
      message.style.display = "block";
      finalContainer.style.display = "flex";
    }

    function triggerConfetti() {
      for (let i = 0; i < 100; i++) {
        const confetti = document.createElement("div");
        confetti.classList.add("confetti");
        confetti.style.left = Math.random() * 100 + "vw";
        confetti.style.backgroundColor = randomPastel();
        confetti.style.animationDuration = (Math.random() * 2 + 2) + "s";
        document.body.appendChild(confetti);
        setTimeout(() => confetti.remove(), 4000);
      }
    }

    function randomPastel() {
      const colors = ["#ffc8dd", "#ffafcc", "#bde0fe", "#a2d2ff", "#cdb4db", "#fcd5ce"];
      return colors[Math.floor(Math.random() * colors.length)];
    }

    updateDisplay();
    createLetters();
  </script>
</body>
</html>

